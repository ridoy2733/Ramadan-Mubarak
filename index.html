<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ‡¶ì ‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú ‡¶ó‡¶æ‡¶á‡¶° ‡ß®‡ß¶‡ß®‡ß¨</title>

<link rel="manifest" href="manifest.json">

<style>
:root{
    --primary:#0f2027;
    --secondary:#203a43;
    --accent:#2ecc71;
    --gold:#f1c40f;
    --bg:#f4f7f9;
    --card-bg:#ffffff;
    --text-dark:#2c3e50;
}

.dark{
    --primary:#000000;
    --secondary:#1a1a1a;
    --card-bg:#1f1f1f;
    --text-dark:#ffffff;
}

body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:linear-gradient(135deg,var(--primary),var(--secondary));
    color:#fff;
    transition:.4s;
    overflow-x:hidden;
}

.container{max-width:520px;margin:auto;padding:20px;}

.card{
    background:var(--card-bg);
    color:var(--text-dark);
    padding:20px;
    border-radius:18px;
    box-shadow:0 8px 25px rgba(0,0,0,0.25);
    margin-bottom:25px;
}

.toggle{
    text-align:right;
    cursor:pointer;
    font-size:13px;
    margin-bottom:8px;
}

.moon{
    position:fixed;
    top:-100px;
    right:-100px;
    width:250px;
    height:250px;
    background:radial-gradient(circle,#f1c40f,#f39c12);
    border-radius:50%;
    opacity:.15;
    animation:float 10s infinite ease-in-out;
}

@keyframes float{
    0%,100%{transform:translateY(0);}
    50%{transform:translateY(20px);}
}

.time-row{
    display:flex;
    justify-content:space-between;
    padding:12px;
    margin:8px 0;
    background:#f9f9f9;
    border-left:5px solid var(--accent);
    border-radius:10px;
    font-weight:600;
}

button{
    padding:8px 12px;
    border:none;
    background:var(--accent);
    color:white;
    border-radius:8px;
    cursor:pointer;
    font-size:13px;
}
</style>
</head>

<body>

<div class="moon"></div>

<div class="container">

<div class="toggle" onclick="toggleTheme()">üåô Dark / Light</div>

<div class="card">
    <h3>‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú ‡¶∏‡¶Æ‡ßü</h3>
    <div class="time-row"><span>‡¶´‡¶ú‡¶∞</span><span id="fajr">--</span></div>
    <div class="time-row"><span>‡¶ú‡ßã‡¶π‡¶∞</span><span id="dhuhr">--</span></div>
    <div class="time-row"><span>‡¶Ü‡¶∏‡¶∞</span><span id="asr">--</span></div>
    <div class="time-row"><span>‡¶Æ‡¶æ‡¶ó‡¶∞‡¶ø‡¶¨</span><span id="maghrib">--</span></div>
    <div class="time-row"><span>‡¶è‡¶∂‡¶æ</span><span id="isha">--</span></div>
</div>

<div class="card">
    <h3>Admin Panel</h3>
    <input type="text" id="noticeInput" placeholder="‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
    <button onclick="saveNotice()">Save</button>
    <p id="noticeDisplay"></p>
</div>

</div>

<audio id="azan" src="azan.mp3"></audio>

<script>
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js');
}

function toggleTheme(){
    document.body.classList.toggle('dark');
}

function saveNotice(){
    const val=document.getElementById("noticeInput").value;
    localStorage.setItem("notice",val);
    loadNotice();
}

function loadNotice(){
    document.getElementById("noticeDisplay").innerText=
    localStorage.getItem("notice") || "‡¶ï‡ßã‡¶® ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶®‡ßá‡¶á";
}
loadNotice();

async function loadData(){
    const res=await fetch("https://api.aladhan.com/v1/timingsByCity?city=Dhaka&country=Bangladesh&method=1");
    const data=await res.json();
    const t=data.data.timings;

    set("fajr",t.Fajr);
    set("dhuhr",t.Dhuhr);
    set("asr",t.Asr);
    set("maghrib",t.Maghrib);
    set("isha",t.Isha);

    checkAzan(t);
}

function set(id,time){
    document.getElementById(id).innerText=time;
}

function checkAzan(t){
    const now=new Date();
    const current=now.getHours()+":"+String(now.getMinutes()).padStart(2,"0");

    Object.values(t).forEach(time=>{
        if(time===current){
            document.getElementById("azan").play();
            new Notification("‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶π‡ßü‡ßá‡¶õ‡ßá");
        }
    });
}

if(Notification.permission!=="granted"){
    Notification.requestPermission();
}

setInterval(loadData,60000);
loadData();
</script>

</body>
</html>